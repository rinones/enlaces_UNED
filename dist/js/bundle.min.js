(()=>{function P(e){return document.querySelector(e)}function Y(e){return Array.prototype.slice.call(document.querySelectorAll(e))}function C(e){return fetch(e,{cache:"no-store"}).then(t=>t.ok?t.json():null).catch(()=>null)}function W(e,t){try{return!e||!t?null:t.split(".").reduce((m,r)=>m&&m[r],e)}catch{return null}}function I(){let e=(location.pathname||"").split("/").pop()||"index.html";return e==="index.html"||e===""?"home":e==="travel.html"?"travel":e==="contenido.html"?"content":e==="uned.html"?"uned":"home"}function K(){try{let e=new URL(location.href),t=e.searchParams.get("asignatura")||e.hash.replace(/^#/,"");return t=(t||"").trim().toLowerCase(),t||null}catch{return null}}function z(){localStorage.getItem("theme")==="dark"&&document.documentElement.classList.add("dark")}function G(){let e=P("#theme-toggle");e&&e.addEventListener("click",()=>{let t=document.documentElement.classList.toggle("dark");e.setAttribute("aria-pressed",t?"true":"false"),localStorage.setItem("theme",t?"dark":"light")})}function V(){try{let e=Y(".main-nav .nav-link");if(!e.length)return;let t=(location.pathname||"").split("/").pop()||"index.html";e.forEach(m=>{try{let r=m.getAttribute("href")||"",n=new URL(r,location.href);if(n.origin!==location.origin){m.classList.remove("active");return}((n.pathname||"").split("/").pop()||"index.html")===t?m.classList.add("active"):m.classList.remove("active")}catch{m.classList.remove("active")}})}catch{}}var U=[],B=null;function R(){return B}function se(e){return e==="home"?"data/links/home.json":e==="travel"?"data/links/travel.json":e==="content"?"data/links/content.json":e.startsWith("uned.common")?"data/links/uned/common.json":e.startsWith("uned.subjects.")?`data/links/uned/subjects/${e.split(".").pop()}.json`:null}function Q(){let e=window&&window.LINKS_PATH?String(window.LINKS_PATH):null,m=(document&&document.body&&document.body.dataset&&document.body.dataset.linksKey?String(document.body.dataset.linksKey):null)||(window&&window.LINKS_KEY?String(window.LINKS_KEY):I()),r=se(m);return(r?C(r):Promise.resolve(null)).then(s=>{if(Array.isArray(s)){U=s;return}return C("data/links.json").then(i=>{if(Array.isArray(i)){B=null,U=i;return}if(i&&typeof i=="object"){B=i;let l=W(i,m);U=Array.isArray(l)?l:[];return}return C(e||"data/uned-links.json").then(l=>{U=Array.isArray(l)?l:[]})})})}function J(){let e=P("#links-grid"),t=P("#empty-state");if(!e)return;e.innerHTML="";let m=U.slice();if(!m.length){t&&(t.hidden=!1);return}t&&(t.hidden=!0),m.forEach(r=>{let n=document.createElement("a");n.href=r.url,n.className="link-card",n.setAttribute("aria-label",(r.title||"")+(r.description?". "+r.description:""));let s=document.createElement("div");s.className="link-content";let i=document.createElement("div");i.className="link-icon",i.innerHTML=r.icon||"";let p=document.createElement("div");p.className="link-title",p.textContent=r.title||"";let l=document.createElement("div");if(l.className="link-desc",l.textContent=r.description||"",s.appendChild(i),s.appendChild(p),r.description&&s.appendChild(l),r.section){let o=r.section.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,"");n.classList.add("section-"+o);let L=document.createElement("div");L.className="section-badge",L.textContent=r.section,n.appendChild(L)}n.appendChild(s),e.appendChild(n)})}function ce(){function e(r){return C(r).then(n=>Array.isArray(n)?n:[]).catch(()=>[])}let t=[e("data/links/home.json"),e("data/links/travel.json"),e("data/links/content.json"),e("data/links/uned/common.json")],m=C("data/uned-subjects.json").then(r=>{let n=[];return(Array.isArray(r)?r:[]).forEach(s=>{(s.asignaturas||[]).forEach(i=>{let p=String(i.href||""),l=/#([a-z0-9\-]+)/i.exec(p),o=l?l[1].toLowerCase():null;o&&n.indexOf(o)===-1&&n.push(o)})}),Promise.all(n.map(s=>e(`data/links/uned/subjects/${s}.json`))).then(s=>s.flat())});return Promise.all([Promise.all(t).then(r=>r.flat()),m]).then(([r,n])=>r.concat(n))}function X(){let e=P("#search-input");e&&e.addEventListener("input",()=>{let t=(e.value||"").trim().toLowerCase(),m=(location.pathname||"").split("/").pop()==="index.html"||(location.pathname||"")==="/";if(!t){J();return}if(m)ce().then(r=>{let n=r.filter(i=>((i.title||"")+" "+(i.description||"")).toLowerCase().includes(t)),s=P("#links-grid");s&&(s.innerHTML="",n.forEach(i=>{let p=document.createElement("a");p.href=i.url,p.className="link-card";let l=document.createElement("div");l.className="link-content";let o=document.createElement("div");o.className="link-icon",o.innerHTML=i.icon||"";let L=document.createElement("div");L.className="link-title",L.textContent=i.title||"";let u=document.createElement("div");u.className="link-desc",u.textContent=i.description||"",l.appendChild(o),l.appendChild(L),i.description&&l.appendChild(u),p.appendChild(l),s.appendChild(p)}))});else{let r=P("#links-grid"),n=P("#empty-state"),s=U.filter(i=>((i.title||"")+" "+(i.description||"")).toLowerCase().includes(t));if(r.innerHTML="",!s.length){n&&(n.hidden=!1);return}n&&(n.hidden=!0),s.forEach(i=>{let p=document.createElement("a");p.href=i.url,p.className="link-card";let l=document.createElement("div");l.className="link-content";let o=document.createElement("div");o.className="link-icon",o.innerHTML=i.icon||"";let L=document.createElement("div");L.className="link-title",L.textContent=i.title||"";let u=document.createElement("div");u.className="link-desc",u.textContent=i.description||"",l.appendChild(o),l.appendChild(L),i.description&&l.appendChild(u),p.appendChild(l),r.appendChild(p)})}})}function Z(){let e=document.querySelector("#common-links-grid");if(!e)return;let t=R();if(t&&t.uned&&Array.isArray(t.uned.common)){m(t.uned.common);return}C("data/links/uned/common.json").then(r=>{if(Array.isArray(r)&&r.length)m(r);else return C("data/links.json").then(n=>{let s=n&&n.uned&&Array.isArray(n.uned.common)?n.uned.common:null;if(s)m(s);else return C("data/uned-common-links.json").then(i=>m(i||[]))})});function m(r){e.innerHTML="",(r||[]).forEach(n=>{let s=document.createElement("a");s.href=n.url,s.className="link-card";let i=document.createElement("div");i.className="link-content";let p=document.createElement("div");p.className="link-icon",p.innerHTML=n.icon||"";let l=document.createElement("div");l.className="link-title",l.textContent=n.title||"";let o=document.createElement("div");o.className="link-desc",o.textContent=n.description||"",i.appendChild(p),i.appendChild(l),n.description&&i.appendChild(o),s.appendChild(i),e.appendChild(s)})}}var ee=function(){let e="data/notices.json",t="site:notices:v1",r=[],n={},s=null,i={};function p(){let a=new Date;return a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}function l(){try{let a=localStorage.getItem(t);return a?JSON.parse(a):{}}catch{return{}}}function o(){try{localStorage.setItem(t,JSON.stringify(n)),localStorage.setItem(t+":updatedAt",String(Date.now()))}catch{}}function L(a){let y=n[a.id]||{},v=Date.now();return y.seen||y.lastClosedAt&&v-y.lastClosedAt<18e5?!1:y.lastShownDate===p()?!!(y.lastClosedAt&&v-y.lastClosedAt>=18e5):!0}function u(a){let y=document.createElement("div");y.className="site-modal-overlay",y.tabIndex=-1;let v=document.createElement("div");v.className="retro-notice-popup",v.setAttribute("role","dialog"),v.setAttribute("aria-modal","true"),v.setAttribute("aria-label",a.title||"Aviso");let w=document.createElement("div");if(w.className="notice-body",a.title){let c=document.createElement("h2");c.textContent=a.title,w.appendChild(c)}let N=document.createElement("div");N.className="notice-content",N.innerHTML=a.html||"",w.appendChild(N);let x=document.createElement("div");x.className="retro-notice-actions";let D=document.createElement("button");D.className="notice-action",D.textContent="Marcar como visto";let _=document.createElement("button");_.className="notice-close",_.textContent="Cerrar",x.appendChild(D),x.appendChild(_),w.appendChild(x),v.appendChild(w),document.body.appendChild(y),document.body.appendChild(v),D.focus();function H(){try{v.remove(),y.remove()}catch{}s=null}D.addEventListener("click",()=>{n[a.id]=n[a.id]||{},n[a.id].seen=!0,i[a.id]&&(clearTimeout(i[a.id]),delete i[a.id]),o(),H()}),_.addEventListener("click",()=>{n[a.id]=n[a.id]||{},n[a.id].lastClosedAt=Date.now(),n[a.id].lastShownDate=p(),o(),i[a.id]&&clearTimeout(i[a.id]),i[a.id]=setTimeout(()=>{L(a)&&b(a.id)},1801e3),H()});function k(c){c.key==="Escape"&&_.click()}document.addEventListener("keydown",k,{once:!0})}function b(a){if(s)return;let y=r.find(v=>v.id===a);y&&(n=l(),!(n[y.id]&&n[y.id].seen)&&(n[y.id]&&n[y.id].lastClosedAt&&Date.now()-n[y.id].lastClosedAt<18e5||(s=y.id,n[y.id]=n[y.id]||{},n[y.id].lastShownDate=p(),o(),u(y))))}function S(){n=l();let a=r.filter(L);a.length&&(a.sort((y,v)=>(y.priority||0)-(v.priority||0)||String(y.id).localeCompare(String(v.id))),b(a[0].id))}function T(){fetch(e).then(a=>a.ok?a.json():null).then(a=>{Array.isArray(a)&&(r=a),setTimeout(S,300)}).catch(()=>{}),window.addEventListener("storage",a=>{if(a.key&&(a.key===t||a.key===t+":updatedAt")&&(n=l(),s)){let y=n[s];if(y&&y.seen){let v=document.querySelector(".retro-notice-popup");v&&v.remove();let w=document.querySelector(".site-modal-overlay");w&&w.remove(),s=null}}})}return{init:T}}();function le(){let e=new Date;return e.setHours(0,0,0,0),e}function te(e){let t=/(^\d{4})-(\d{2})-(\d{2})$/.exec(String(e||""));return t?new Date(+t[1],+t[2]-1,+t[3]):null}function de(e){try{return e.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}catch{let m=String(e.getMonth()+1).padStart(2,"0");return String(e.getDate()).padStart(2,"0")+"/"+m}}async function ue(){let e=[],t=I(),m=K(),r=[];try{let n=C(`data/activities/subjects/${K()||""}.json`).then(u=>Array.isArray(u)?u:[]).catch(()=>[]),s=C("data/activities/general.json").then(u=>Array.isArray(u)?u:[]).catch(()=>[]),i=C("data/activities.json").then(u=>Array.isArray(u)?u:u&&typeof u=="object"?Array.isArray(u.general)?u.general:[]:[]).catch(()=>[]),[p,l,o]=await Promise.all([n,s,i]),L=u=>(u||[]).map(b=>({ymd:String(b.date||b.ymd||""),text:String(b.title||b.text||"").trim(),pages:Array.isArray(b.pages)?b.pages:b.page?[b.page]:[],important:!!b.important})).filter(b=>b.ymd);r.push(...L(p)),r.push(...L(l)),r.push(...L(o))}catch{}for(let n=0;n<localStorage.length;n++){let s=localStorage.key(n);if(!s||!s.startsWith("notes:"))continue;let i=s.slice(6),p=te(i);if(p)try{let l=JSON.parse(localStorage.getItem(s)||"[]");Array.isArray(l)&&l.forEach(o=>{if(!o)return;if(o.pages&&Array.isArray(o.pages)){if(o.pages.indexOf(t)===-1)return}else if(o.page&&String(o.page)!==t)return;if(m&&o.subject&&String(o.subject).toLowerCase()!==m)return;let L=!!(o.pages||o.page||o.subject),u=!1;if(!L){let a=r.filter(y=>{try{return String(y.ymd)===i&&String(y.text||"").trim()===String(o.text||"").trim()}catch{return!1}});if(a.length){let y=a.some(w=>Array.isArray(w.pages)&&w.pages.indexOf(t)!==-1),v=a.some(w=>w.page&&String(w.page)===t);if(!y&&!v)return;u=a.some(w=>!!w.important)}}let b=o&&(o.text||o.title||o.link)||"Actividad",S=o&&o.link?String(o.link):"",T=!!(o&&o.important||u);e.push({date:p,ymd:i,title:b,link:S,important:T})})}catch{}}return e}function me(){let e=K();return e?C(`data/activities/subjects/${e}.json`).then(t=>Array.isArray(t)?t:[]):C("data/activities/general.json").then(t=>Array.isArray(t)?t:[])}function pe(){let e=K();return C("data/activities.json").then(t=>{if(Array.isArray(t))return t;if(t&&typeof t=="object"){if(e&&t.subjects&&Array.isArray(t.subjects[e]))return t.subjects[e];if(Array.isArray(t.general))return t.general}return[]})}function ne(){let e="#upcoming-activities",t="#upcoming-empty",m=document.querySelector(e),r=document.querySelector(t);if(!document.getElementById("upcoming-styles")){let b=".upcoming-section{margin:1rem 0 1.25rem; padding:0.75rem; background:var(--upc-bg, #f7f9fc); border:1px solid #e5e7eb; border-radius:8px}.upcoming-title{margin:0 0 .5rem; font-size:1.05rem}.upcoming-list{list-style:none; padding:0; margin:0; display:grid; gap:.35rem}.upcoming-item{display:flex; align-items:center; gap:.5rem}.upcoming-date{font-variant-numeric:tabular-nums; font-weight:600; color:#0d6efd; min-width:3.4rem}.upcoming-link{color:inherit; text-decoration:none}.upcoming-link:hover{text-decoration:underline}.upcoming-empty{color:#6b7280; font-size:.95rem}@keyframes blink-red{0%,100%{background-color:rgba(255,0,0,0.10)}50%{background-color:rgba(255,0,0,0.35)}}.important-blink{animation:blink-red 1s ease-in-out infinite;border-radius:6px;padding:0.15rem 0.4rem;color:var(--text);display:inline-block}.upcoming-item.upcoming-important .important-blink, .upcoming-item .important-blink{display:inline-block}",S=document.createElement("style");S.id="upcoming-styles",S.textContent=b,document.head.appendChild(S)}if(!m)return;function n(b){if(m.innerHTML="",!b||!b.length){r&&(r.hidden=!1);return}r&&(r.hidden=!0),b.forEach(S=>{let T=document.createElement("li");T.className="upcoming-item";let a=document.createElement("span");a.className="upcoming-date",a.textContent=de(S.date),T.appendChild(a);let v=((w,N)=>{let x=N?document.createElement("a"):document.createElement("span");return N&&(x.className="upcoming-link"),x.textContent=w,x})(S.title,S.link);if(S.important){let w=document.createElement("span");w.className="important-blink",w.appendChild(v),T.classList.add("upcoming-important"),T.appendChild(w)}else T.appendChild(v);m.appendChild(T)})}let s=I(),i=K();function p(b){return(b||[]).map(S=>{let T=S.date||S.ymd,a=T?te(String(T)):null;if(!a)return null;if(S.pages&&Array.isArray(S.pages)){if(!s||S.pages.indexOf(s)===-1)return null}else if(S.page&&(!s||String(S.page)!==s))return null;return i&&S.subject&&String(S.subject).toLowerCase()!==i?null:{date:a,ymd:T,title:S.title||S.text||"Actividad",link:S.link||"",important:!!S.important}}).filter(Boolean)}let l=le(),L=!!(window&&window.UPCOMING_ONLY_FILE)?Promise.resolve([]):Promise.resolve().then(ue),u=me().then(p).then(b=>b.length?b:pe().then(p));Promise.all([L,u]).then(([b,S])=>{let T=(b||[]).concat(S||[]),a=new Set,y=[];T.forEach(N=>{try{if(!N)return;let x=N.ymd||N.date&&N.date.toISOString&&N.date.toISOString().slice(0,10)||"",D=String(N.title||N.text||"").trim().toLowerCase();if(!x)return;let _=`${x}|${D}`;a.has(_)||(a.add(_),y.push(N))}catch{}});let w=y.filter(N=>N.date&&N.date>=l).sort((N,x)=>N.date-x.date||N.title.localeCompare(x.title)).slice(0,10);n(w)})}function ae(e){return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function re(){let e=new URL(location.href),t=e.searchParams.get("asignatura")||e.hash.replace(/^#/,"");return t=(t||"").trim().toLowerCase(),t||null}function fe(e){try{return e.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}catch{let m=String(e.getMonth()+1).padStart(2,"0");return String(e.getDate()).padStart(2,"0")+"/"+m}}function q(e){let t=/(\d{4})-(\d{2})-(\d{2})/.exec(String(e||""));return t?new Date(+t[1],+t[2]-1,+t[3]):null}function F(){let e=new Date;return e.setHours(0,0,0,0),e}function O(e,t){e&&(e.innerHTML="",(t||[]).forEach(m=>{let r=document.createElement("a");r.href=m.url,r.className="link-card";let n=document.createElement("div");n.className="link-content";let s=document.createElement("div");s.className="link-icon",s.innerHTML=m.icon||"";let i=document.createElement("div");i.className="link-title",i.textContent=m.title||"";let p=document.createElement("div");p.className="link-desc",p.textContent=m.description||"",n.appendChild(s),n.appendChild(i),m.description&&n.appendChild(p),r.appendChild(n),e.appendChild(r)}))}function he(e){let t=[];return e.forEach(m=>{(m.asignaturas||[]).forEach(r=>{let n=ae(r.nombre);n&&t.indexOf(n)===-1&&t.push(n)})}),t}function ie(){let e=P("#uned-subject-selector");if(!e)return;let t=P("#uned-title"),m=P("#uned-subtitle"),r=P("#upcoming-title"),n=P("#uned-upcoming"),s=P("#uned-upcoming-empty"),i=P("#common-links-grid"),p=P("#subject-links-grid"),l=P("#subject-empty-state"),o=P("#subject-links-title"),L=P("#subject-extras"),u=re(),b=[];function S(){if(!e)return;e.querySelectorAll("[data-btn-id]").forEach(c=>{let h=c.getAttribute("data-btn-id");if(!h)return;let d=e.querySelector('[data-led-id="'+h+'"]');if(!d)return;c.getAttribute("aria-pressed")==="true"||c.classList.contains("active")||c.classList.contains("is-active")?d.classList.add("led-on"):d.classList.remove("led-on")})}function T(k){let c=new URL(location.href);k?(c.hash=k,history.replaceState(null,"",c.toString())):(c.hash="",history.replaceState(null,"",c.pathname+c.search))}function a(k){u===k&&(k=null),u=k||null,T(u),H()}function y(){if(e&&e.children&&e.children.length>0){e.querySelectorAll("[data-subject]").forEach(d=>{d.replaceWith(d.cloneNode(!0))});let h=e.querySelectorAll("[data-subject]");h.forEach(d=>{let f=(d.getAttribute("data-subject")||"").trim().toLowerCase();d.addEventListener("click",()=>{a(f)})}),h.forEach(d=>{let f=(d.getAttribute("data-subject")||"").trim().toLowerCase();!!u&&f===u?(d.classList.add("active"),d.setAttribute("aria-pressed","true")):(d.classList.remove("active"),d.setAttribute("aria-pressed","false"))}),S();return}e.innerHTML="",b.slice().sort((c,h)=>(c.curso||0)-(h.curso||0)||(c.cuatrimestre||0)-(h.cuatrimestre||0)).forEach(c=>{let h=document.createElement("div");h.className="mega-section";let d=document.createElement("div");d.className="mega-title";let f=(c.curso?c.curso+"\xBA":"")+(c.cuatrimestre?" \xB7 "+(c.cuatrimestre===1?"1er":"2\xBA")+" cuatrimestre":"");d.textContent=f||"Asignaturas",h.appendChild(d);let g=document.createElement("div");g.className="mega-list",(c.asignaturas||[]).slice().sort((A,M)=>(A.nombre||"").localeCompare(M.nombre||"","es",{sensitivity:"base"})).forEach(A=>{let M=ae(A.nombre),j=document.createElement("button");j.type="button",j.className="subject-btn btn-rect-custom",j.textContent=A.nombre;let $=!!u&&M===u;j.setAttribute("aria-pressed",$?"true":"false"),$&&j.classList.add("is-active"),j.addEventListener("click",()=>{a(M)}),g.appendChild(j)}),h.appendChild(g),e.appendChild(h)})}function v(){let k=he(b),c=I();return Promise.all(k.map(h=>C(`data/activities/subjects/${h}.json`).then(d=>[h,Array.isArray(d)?d:[]]))).then(h=>{let d=F(),f=[];return h.forEach(([g,E])=>{E.forEach(A=>{let M=q(A.date||A.ymd);M&&(A.pages&&Array.isArray(A.pages)&&A.pages.indexOf(c)===-1||A.page&&String(A.page)!==c||A.subject&&String(A.subject).toLowerCase()!==g||f.push({date:M,title:String(A.title||A.text||"Actividad"),link:A.link||"",important:!!A.important}))})}),f.length?f.filter(g=>g.date>=d).sort((g,E)=>g.date-E.date||g.title.localeCompare(E.title)).slice(0,10):C("data/activities.json").then(g=>{if(g&&g.subjects){let E=F(),A=[];return Object.keys(g.subjects||{}).forEach(M=>{(g.subjects[M]||[]).forEach(j=>{let $=q(j.date||j.ymd);$&&(j.pages&&Array.isArray(j.pages)&&j.pages.indexOf(c)===-1||j.page&&String(j.page)!==c||A.push({date:$,title:String(j.title||j.text||"Actividad"),link:j.link||"",important:!!j.important}))})}),A.filter(M=>M.date>=E).sort((M,j)=>M.date-j.date||M.title.localeCompare(j.title)).slice(0,10)}return[]})})}function w(k){let c=I();return C(`data/activities/subjects/${k}.json`).then(h=>Array.isArray(h)?h:[]).then(h=>{if(h.length){let d=F();return h.map(f=>({raw:f,date:q(f.date||f.ymd),title:String(f.title||f.text||"Actividad"),link:f.link||""})).filter(f=>{if(!f.date)return!1;let g=f.raw;return g.pages&&Array.isArray(g.pages)&&g.pages.indexOf(c)===-1||g.page&&String(g.page)!==c||g.subject&&String(g.subject).toLowerCase()!==k?!1:f.date&&f.date>=d}).sort((f,g)=>f.date-g.date||f.title.localeCompare(g.title)).slice(0,10).map(f=>({date:f.date,title:f.title,link:f.link,important:!!(f.raw&&f.raw.important)}))}return C("data/activities.json").then(d=>{if(d&&d.subjects&&Array.isArray(d.subjects[k])){let f=d.subjects[k]||[],g=F();return f.map(E=>({raw:E,date:q(E.date||E.ymd),title:String(E.title||E.text||"Actividad"),link:E.link||""})).filter(E=>{if(!E.date)return!1;let A=E.raw;return A.pages&&Array.isArray(A.pages)&&A.pages.indexOf(c)===-1||A.page&&String(A.page)!==c?!1:E.date&&E.date>=g}).sort((E,A)=>E.date-A.date||E.title.localeCompare(A.title)).slice(0,10).map(E=>({date:E.date,title:E.title,link:E.link,important:!!(E.raw&&E.raw.important)}))}return[]})})}function N(){p&&(p.innerHTML=""),l&&(l.hidden=!0),o&&(o.hidden=!0)}function x(){L&&(L.hidden=!0,L.innerHTML="")}function D(){return C("data/links/uned/common.json").then(k=>{if(Array.isArray(k))O(i,k);else{let c=R();if(c&&c.uned&&Array.isArray(c.uned.common))O(i,c.uned.common);else return C("data/links.json").then(h=>{let d=h&&h.uned&&Array.isArray(h.uned.common)?h.uned.common:null;if(d)O(i,d);else return C("data/uned-common-links.json").then(f=>O(i,f||[]))})}})}function _(k){return C(`data/links/uned/subjects/${k}.json`).then(c=>Array.isArray(c)?c:null).then(c=>{if(c){O(p,c);let d=c.length>0;l&&(l.hidden=d),o&&(o.hidden=!d,o.textContent="Enlaces de asignatura");return}let h=R();if(h&&h.uned&&h.uned.subjects&&Array.isArray(h.uned.subjects[k])){let d=h.uned.subjects[k];O(p,d);let f=d.length>0;l&&(l.hidden=f),o&&(o.hidden=!f,o.textContent="Enlaces de asignatura");return}return C("data/links.json").then(d=>{let f=d&&d.uned&&d.uned.subjects&&Array.isArray(d.uned.subjects[k])?d.uned.subjects[k]:null;if(f){O(p,f);let g=f.length>0;l&&(l.hidden=g),o&&(o.hidden=!g,o.textContent="Enlaces de asignatura");return}return C(`data/uned-${k}-links.json`).then(g=>Array.isArray(g)?g:C(`data/${k}-links.json`)).then(g=>{let E=Array.isArray(g)?g:[];O(p,E);let A=E.length>0;l&&(l.hidden=A),o&&(o.hidden=!A,o.textContent="Enlaces de asignatura")})})})}function H(){t&&(t.textContent=u?"UNED \xB7 "+u.toUpperCase():"UNED"),m&&(m.textContent=u?"Vista espec\xEDfica de asignatura":"Vista general y selector de asignaturas"),r&&(r.textContent=u?"Pr\xF3ximas actividades ("+u.toUpperCase()+")":"Pr\xF3ximas actividades (Todas)"),y(),(u?w(u):v()).then(k=>{if(n){if(n.innerHTML="",!k||!k.length){s&&(s.hidden=!1);return}s&&(s.hidden=!0),k.forEach(c=>{let h=document.createElement("li");h.className="upcoming-item";let d=document.createElement("span");d.className="upcoming-date",d.textContent=fe(c.date),h.appendChild(d);let g=((E,A)=>{let M=A?document.createElement("a"):document.createElement("span");return A&&(M.className="upcoming-link"),M.textContent=E,M})(c.title,c.link);if(c.important){let E=document.createElement("span");E.className="important-blink",E.appendChild(g),h.classList.add("upcoming-important"),h.appendChild(E)}else h.appendChild(g);n.appendChild(h)})}}),D(),u?_(u):N(),x()}C("data/uned-subjects.json").then(k=>{b=Array.isArray(k)?k:[],H(),window.addEventListener("hashchange",()=>{u=re(),H()})})}function oe(){z(),G(),V(),Q().then(()=>{J(),X()}),ee.init(),ne(),ie(),Z()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",oe):oe();})();
//# sourceMappingURL=bundle.min.js.map
